events {}
stream {
    
    upstream emulators {
        hash $binary_remote_addr consistent;


        server emulator-1:5555;
        server emulator-2:5555;
    }
    server {
        listen 5555;
        proxy_pass emulators;
    }

    # upstream emulators2 {
    #     hash $binary_remote_addr consistent;


    #     server emulator-1:6080;
    #     server emulator-2:6080;
    # }
    # server {
    #     listen 6080;
    #     proxy_pass emulators2;
    # }
}